[tox]
# TODO: Fix py{37,38}. I think Nix is confusing Tox, but I can't prove it.
envlist = py{37,38,39}
isolated_build = True

[tox:.package]
# note tox will use the same python version as under what tox is installed to package
# so unless this is python 3 you can require a given python version for the packaging
# environment via the basepython key
basepython = python3

[testenv]
passenv =
    PYTHONPATH
deps =
    # Only install those dev dependencies I use in the actual tests
    pytest
    typing_extensions
	dask[bag]
allowlist_externals=
    /*/rm
    /*/test
commands =
    rm -rf .cache
    pytest --quiet --exitfirst
